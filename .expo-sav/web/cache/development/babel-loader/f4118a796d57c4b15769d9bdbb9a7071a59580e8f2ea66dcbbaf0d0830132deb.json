{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport axios from 'axios';\nimport * as URL from \"../config.js\";\nvar BubbleApi = function () {\n  function BubbleApi() {\n    _classCallCheck(this, BubbleApi);\n    this.apiToken = '';\n    this.dataUrl = URL.DATA_URL;\n    this.workflowUrl = URL.WORKFLOW_URL;\n  }\n  _createClass(BubbleApi, [{\n    key: \"apiLogin\",\n    value: function () {\n      var _apiLogin = _asyncToGenerator(function* (email, password) {\n        try {\n          var _data$response, _data$response2;\n          var _yield$axios$post = yield axios.post(`${URL.WORKFLOW_URL}/login`, {\n              email: email,\n              password: password\n            }),\n            data = _yield$axios$post.data;\n          var userInfo = {\n            userID: data == null ? void 0 : (_data$response = data.response) == null ? void 0 : _data$response.user_id,\n            token: data == null ? void 0 : (_data$response2 = data.response) == null ? void 0 : _data$response2.token\n          };\n          this.apiToken = userInfo.token;\n          return userInfo;\n        } catch (err) {\n          console.log(`apiLogin fail ${email}`);\n        }\n      });\n      function apiLogin(_x, _x2) {\n        return _apiLogin.apply(this, arguments);\n      }\n      return apiLogin;\n    }()\n  }, {\n    key: \"_fetchData\",\n    value: function () {\n      var _fetchData2 = _asyncToGenerator(function* (thingType, thingID) {\n        try {\n          var _yield$axios$get = yield axios.get(`${this.dataUrl}/${thingType}/${thingID}`, {}, {\n              headers: {\n                Authorization: `Bearer ${this.apiToken}`\n              }\n            }),\n            data = _yield$axios$get.data;\n          return data.response;\n        } catch (err) {\n          console.log(`_fetchData fail ${thingType} ${thingID}`);\n        }\n      });\n      function _fetchData(_x3, _x4) {\n        return _fetchData2.apply(this, arguments);\n      }\n      return _fetchData;\n    }()\n  }, {\n    key: \"apiLogout\",\n    value: function () {\n      var _apiLogout = _asyncToGenerator(function* () {\n        try {\n          var _yield$axios$post2 = yield axios.post(`${this.workflowUrl}/logout`, {}, {\n              headers: {\n                Authorization: `Bearer ${this.apiToken}`\n              }\n            }),\n            data = _yield$axios$post2.data;\n          return data.response;\n        } catch (err) {\n          console.log(`apiLogout fail`);\n        }\n      });\n      function apiLogout() {\n        return _apiLogout.apply(this, arguments);\n      }\n      return apiLogout;\n    }()\n  }, {\n    key: \"fetchUser\",\n    value: function () {\n      var _fetchUser = _asyncToGenerator(function* (userID) {\n        var rawUser = yield this._fetchData('user', userID);\n        return {\n          firstName: rawUser.first_text,\n          lastName: rawUser.last_text,\n          name: rawUser.first_last_text,\n          team: rawUser.teamnumt_text\n        };\n      });\n      function fetchUser(_x5) {\n        return _fetchUser.apply(this, arguments);\n      }\n      return fetchUser;\n    }()\n  }, {\n    key: \"normalizeData\",\n    value: function () {\n      var _normalizeData = _asyncToGenerator(function* (data) {});\n      function normalizeData(_x6) {\n        return _normalizeData.apply(this, arguments);\n      }\n      return normalizeData;\n    }()\n  }, {\n    key: \"fetchDataAndNormalize\",\n    value: function () {\n      var _fetchDataAndNormalize = _asyncToGenerator(function* (endpoint) {\n        try {\n          var rawData = yield this.fetchData(endpoint);\n          var normalizedData = yield this.normalizeData(rawData);\n          return normalizedData;\n        } catch (error) {\n          throw error;\n        }\n      });\n      function fetchDataAndNormalize(_x7) {\n        return _fetchDataAndNormalize.apply(this, arguments);\n      }\n      return fetchDataAndNormalize;\n    }()\n  }]);\n  return BubbleApi;\n}();\nexport { BubbleApi as default };","map":{"version":3,"names":["axios","URL","BubbleApi","_classCallCheck","apiToken","dataUrl","DATA_URL","workflowUrl","WORKFLOW_URL","_createClass","key","value","_apiLogin","_asyncToGenerator","email","password","_data$response","_data$response2","_yield$axios$post","post","data","userInfo","userID","response","user_id","token","err","console","log","apiLogin","_x","_x2","apply","arguments","_fetchData2","thingType","thingID","_yield$axios$get","get","headers","Authorization","_fetchData","_x3","_x4","_apiLogout","_yield$axios$post2","apiLogout","_fetchUser","rawUser","firstName","first_text","lastName","last_text","name","first_last_text","team","teamnumt_text","fetchUser","_x5","_normalizeData","normalizeData","_x6","_fetchDataAndNormalize","endpoint","rawData","fetchData","normalizedData","error","fetchDataAndNormalize","_x7","default"],"sources":["/Users/sgreene/src/cs1/api/BubbleApi.js"],"sourcesContent":["import axios from 'axios';\nimport * as URL from '../config.js';\n\nexport default class BubbleApi {\n    constructor() {\n      this.apiToken = '';\n      this.dataUrl = URL.DATA_URL;\n      this.workflowUrl = URL.WORKFLOW_URL;\n    }\n  \n    async apiLogin(email, password) {\n        try {\n            const { data } = await axios.post(\n                `${URL.WORKFLOW_URL}/login`, \n                { email, password }\n            );\n            const userInfo = { userID: data?.response?.user_id, token: data?.response?.token };\n            this.apiToken = userInfo.token;\n    \n            return userInfo;\n        } catch(err) {\n            console.log(`apiLogin fail ${email}`);\n\n        }\n    }\n\n    async _fetchData(thingType, thingID) {\n        try {\n            const { data } = await axios.get(\n                `${this.dataUrl}/${thingType}/${thingID}`,\n                {},\n                { headers: { Authorization: `Bearer ${this.apiToken}` } },\n            );\n            return data.response;\n        } catch(err) {\n            console.log(`_fetchData fail ${thingType} ${thingID}`);\n        }\n    }    \n    \n    async apiLogout() {\n        try {\n            const { data } = await axios.post(\n                `${this.workflowUrl}/logout`,\n                {},\n                { headers: { Authorization: `Bearer ${this.apiToken}` } },\n            );\n            return data.response;\n        } catch(err) {\n            console.log(`apiLogout fail`);\n        }\n    }\n\n    async fetchUser(userID) {\n        const rawUser = await this._fetchData('user', userID);\n        return {\n            firstName: rawUser.first_text,\n            lastName: rawUser.last_text,\n            name: rawUser.first_last_text,\n            team: rawUser.teamnumt_text,\n        }\n    }\n  \n    async normalizeData(data) {\n      // Instance-specific normalization logic\n    }\n  \n    async fetchDataAndNormalize(endpoint) {\n      try {\n        const rawData = await this.fetchData(endpoint);\n        const normalizedData = await this.normalizeData(rawData);\n        return normalizedData;\n      } catch (error) {\n        throw error;\n      }\n    }\n  }\n  \n \n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}