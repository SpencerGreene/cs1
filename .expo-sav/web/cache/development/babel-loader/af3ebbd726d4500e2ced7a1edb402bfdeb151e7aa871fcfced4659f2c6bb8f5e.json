{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { blobToBase64String, base64StringToBlob } from 'blob-util';\nimport { decode, encode } from 'base-64';\nif (!global.btoa) global.btoa = encode;\nif (!global.atob) global.atob = decode;\nexport var BlobToSaveImage = function () {\n  var _ref = _asyncToGenerator(function* (blob, contentType) {\n    var imageData = yield blobToBase64String(blob);\n    return {\n      imageData: imageData,\n      contentType: contentType\n    };\n  });\n  return function BlobToSaveImage(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var savedImageToBlob = function () {\n  var _ref2 = _asyncToGenerator(function* (savedImage) {\n    if (!savedImage) return null;\n    console.log({\n      savedImage: savedImage\n    });\n    if (Platform.OS === 'android') {\n      console.log('Android, dude!');\n      return null;\n    } else {\n      try {\n        var blob = base64StringToBlob(savedImage.imageData);\n        return blob;\n      } catch (error) {\n        console.error('Error converting base64 to blob:', error);\n        throw error;\n      }\n    }\n  });\n  return function savedImageToBlob(_x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var saveData = function () {\n  var _ref3 = _asyncToGenerator(function* (key, data) {\n    try {\n      if (Platform.OS === 'web') {\n        if (data instanceof Blob) {\n          var blobUrl = URL.createObjectURL(data);\n          localStorage.setItem(key, blobUrl);\n        } else {\n          localStorage.setItem(key, JSON.stringify(data));\n        }\n      } else {\n        if (data instanceof Blob) {\n          var base64String = yield BlobToBase64(data);\n          yield AsyncStorage.setItem(key, base64String);\n        } else {\n          yield AsyncStorage.setItem(key, JSON.stringify(data));\n        }\n      }\n    } catch (error) {\n      console.error('Error saving data:', error);\n    }\n  });\n  return function saveData(_x4, _x5) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var getData = function () {\n  var _ref4 = _asyncToGenerator(function* (key) {\n    try {\n      if (Platform.OS === 'web') {\n        var storedData = localStorage.getItem(key);\n        if (storedData && storedData.startsWith('blob:')) {\n          return storedData;\n        } else {\n          return storedData ? JSON.parse(storedData) : null;\n        }\n      } else {\n        var _storedData = yield AsyncStorage.getItem(key);\n        return _storedData ? JSON.parse(_storedData) : null;\n      }\n    } catch (error) {\n      console.error('Error retrieving data:', error);\n      return null;\n    }\n  });\n  return function getData(_x6) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nexport var deleteData = function () {\n  var _ref5 = _asyncToGenerator(function* (key) {\n    try {\n      if (Platform.OS === 'web') {\n        var storedData = localStorage.getItem(key);\n        if (storedData && storedData.startsWith('blob:')) {\n          URL.revokeObjectURL(storedData);\n        }\n        localStorage.removeItem(key);\n      } else {\n        yield AsyncStorage.removeItem(key);\n      }\n    } catch (error) {\n      console.error('Error deleting data:', error);\n    }\n  });\n  return function deleteData(_x7) {\n    return _ref5.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["AsyncStorage","blobToBase64String","base64StringToBlob","decode","encode","global","btoa","atob","BlobToSaveImage","_ref","_asyncToGenerator","blob","contentType","imageData","_x","_x2","apply","arguments","savedImageToBlob","_ref2","savedImage","console","log","Platform","OS","error","_x3","saveData","_ref3","key","data","Blob","blobUrl","URL","createObjectURL","localStorage","setItem","JSON","stringify","base64String","BlobToBase64","_x4","_x5","getData","_ref4","storedData","getItem","startsWith","parse","_x6","deleteData","_ref5","revokeObjectURL","removeItem","_x7"],"sources":["/Users/sgreene/src/cs1/helpers/imageHelpers.js"],"sourcesContent":["import { Platform } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nimport { blobToBase64String, base64StringToBlob } from 'blob-util'\nimport { decode, encode } from 'base-64';\n\nif (!global.btoa) global.btoa = encode;\nif (!global.atob) global.atob = decode;\n\n// Helper function to convert blob to base64 in React Native\nexport const BlobToSaveImage = async (blob, contentType) => {\n    const imageData = await blobToBase64String(blob);\n    return { imageData, contentType };\n};\n\nexport const savedImageToBlob = async (savedImage) => {\n    if (!savedImage) return null;\n    console.log({savedImage});\n    if (Platform.OS === 'android') {\n        console.log('Android, dude!');\n        return null;\n    } else {\n        try {\n            const blob = base64StringToBlob(savedImage.imageData);\n            return blob;\n        } catch (error) {\n            console.error('Error converting base64 to blob:', error);\n            throw error;\n        }\n    }\n};\n\n\n// NOT USED (yet)\n// Function to save data to storage\nexport const saveData = async (key, data) => {\n    try {\n        if (Platform.OS === 'web') {\n            // Handle image blob for web\n            if (data instanceof Blob) {\n                const blobUrl = URL.createObjectURL(data);\n                localStorage.setItem(key, blobUrl);\n            } else {\n                localStorage.setItem(key, JSON.stringify(data));\n            }\n        } else {\n            // Handle image blob for React Native\n            if (data instanceof Blob) {\n                // Convert blob to base64 string\n                const base64String = await BlobToBase64(data);\n                await AsyncStorage.setItem(key, base64String);\n            } else {\n                await AsyncStorage.setItem(key, JSON.stringify(data));\n            }\n        }\n    } catch (error) {\n        console.error('Error saving data:', error);\n    }\n};\n\n// Function to retrieve data from storage\nexport const getData = async (key) => {\n    try {\n        if (Platform.OS === 'web') {\n            const storedData = localStorage.getItem(key);\n            // Check if it's a blob URL\n            if (storedData && storedData.startsWith('blob:')) {\n                return storedData;\n            } else {\n                return storedData ? JSON.parse(storedData) : null;\n            }\n        } else {\n            const storedData = await AsyncStorage.getItem(key);\n            return storedData ? JSON.parse(storedData) : null;\n        }\n    } catch (error) {\n        console.error('Error retrieving data:', error);\n        return null;\n    }\n};\n\n\n\n// Function to delete data from storage\nexport const deleteData = async (key) => {\n    try {\n        if (Platform.OS === 'web') {\n            // Handle cleanup for web (remove blob URL)\n            const storedData = localStorage.getItem(key);\n            if (storedData && storedData.startsWith('blob:')) {\n                URL.revokeObjectURL(storedData);\n            }\n            localStorage.removeItem(key);\n        } else {\n            // Handle cleanup for React Native\n            await AsyncStorage.removeItem(key);\n        }\n    } catch (error) {\n        console.error('Error deleting data:', error);\n    }\n};\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}