{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport axios from 'axios';\nimport * as URL from \"../config.js\";\nvar BubbleApi = function () {\n  function BubbleApi() {\n    _classCallCheck(this, BubbleApi);\n    this.dataUrl = URL.DATA_URL;\n    this.workflowUrl = URL.WORKFLOW_URL;\n  }\n  _createClass(BubbleApi, [{\n    key: \"normalizeData\",\n    value: function () {\n      var _normalizeData = _asyncToGenerator(function* (data) {});\n      function normalizeData(_x) {\n        return _normalizeData.apply(this, arguments);\n      }\n      return normalizeData;\n    }()\n  }, {\n    key: \"fetchDataAndNormalize\",\n    value: function () {\n      var _fetchDataAndNormalize = _asyncToGenerator(function* (endpoint) {\n        try {\n          var rawData = yield this.fetchData(endpoint);\n          var normalizedData = yield this.normalizeData(rawData);\n          return normalizedData;\n        } catch (error) {\n          throw error;\n        }\n      });\n      function fetchDataAndNormalize(_x2) {\n        return _fetchDataAndNormalize.apply(this, arguments);\n      }\n      return fetchDataAndNormalize;\n    }()\n  }], [{\n    key: \"setApiToken\",\n    value: function setApiToken(token) {\n      this.apiToken = token;\n    }\n  }, {\n    key: \"apiLogin\",\n    value: function () {\n      var _apiLogin = _asyncToGenerator(function* (email, password) {\n        try {\n          var _data$response, _data$response2;\n          var _yield$axios$post = yield axios.post(`${URL.WORKFLOW_URL}/login`, {\n              email: email,\n              password: password\n            }),\n            data = _yield$axios$post.data;\n          var userInfo = {\n            userID: data == null ? void 0 : (_data$response = data.response) == null ? void 0 : _data$response.user_id,\n            token: data == null ? void 0 : (_data$response2 = data.response) == null ? void 0 : _data$response2.token\n          };\n          this.apiToken = userInfo.token;\n          return userInfo;\n        } catch (err) {\n          console.log(`apiLogin fail ${email}`);\n        }\n      });\n      function apiLogin(_x3, _x4) {\n        return _apiLogin.apply(this, arguments);\n      }\n      return apiLogin;\n    }()\n  }, {\n    key: \"printContents\",\n    value: function printContents() {\n      console.log(this);\n    }\n  }, {\n    key: \"_fetchData\",\n    value: function () {\n      var _fetchData2 = _asyncToGenerator(function* (thingType, thingID) {\n        try {\n          var _yield$axios$get = yield axios.get(`${this.dataUrl}/${thingType}/${thingID}`, {}, {\n              headers: {\n                Authorization: `Bearer ${this.apiToken}`\n              }\n            }),\n            data = _yield$axios$get.data;\n          return data.response;\n        } catch (err) {\n          console.log(`_fetchData fail ${thingType} ${thingID}`);\n        }\n      });\n      function _fetchData(_x5, _x6) {\n        return _fetchData2.apply(this, arguments);\n      }\n      return _fetchData;\n    }()\n  }, {\n    key: \"apiLogout\",\n    value: function () {\n      var _apiLogout = _asyncToGenerator(function* () {\n        console.log(this.apiToken);\n        try {\n          var _yield$axios$post2 = yield axios.post(`${this.workflowUrl}/logout`, {}, {\n              headers: {\n                Authorization: `Bearer ${this.apiToken}`\n              }\n            }),\n            data = _yield$axios$post2.data;\n          return data.response;\n        } catch (err) {\n          console.log(`apiLogout fail`);\n        }\n      });\n      function apiLogout() {\n        return _apiLogout.apply(this, arguments);\n      }\n      return apiLogout;\n    }()\n  }, {\n    key: \"fetchUser\",\n    value: function () {\n      var _fetchUser = _asyncToGenerator(function* (userID) {\n        var rawUser = yield this._fetchData('user', userID);\n        return {\n          firstName: rawUser.first_text,\n          lastName: rawUser.last_text,\n          name: rawUser.first_last_text,\n          team: rawUser.teamnumt_text\n        };\n      });\n      function fetchUser(_x7) {\n        return _fetchUser.apply(this, arguments);\n      }\n      return fetchUser;\n    }()\n  }]);\n  return BubbleApi;\n}();\nBubbleApi.apiToken = '';\nexport { BubbleApi as default };","map":{"version":3,"names":["axios","URL","BubbleApi","_classCallCheck","dataUrl","DATA_URL","workflowUrl","WORKFLOW_URL","_createClass","key","value","_normalizeData","_asyncToGenerator","data","normalizeData","_x","apply","arguments","_fetchDataAndNormalize","endpoint","rawData","fetchData","normalizedData","error","fetchDataAndNormalize","_x2","setApiToken","token","apiToken","_apiLogin","email","password","_data$response","_data$response2","_yield$axios$post","post","userInfo","userID","response","user_id","err","console","log","apiLogin","_x3","_x4","printContents","_fetchData2","thingType","thingID","_yield$axios$get","get","headers","Authorization","_fetchData","_x5","_x6","_apiLogout","_yield$axios$post2","apiLogout","_fetchUser","rawUser","firstName","first_text","lastName","last_text","name","first_last_text","team","teamnumt_text","fetchUser","_x7","default"],"sources":["/Users/sgreene/src/cs1/api/BubbleApi.js"],"sourcesContent":["import axios from 'axios';\nimport * as URL from '../config.js';\n\nexport default class BubbleApi {\n    static apiToken = '';\n\n    constructor() {\n      this.dataUrl = URL.DATA_URL;\n      this.workflowUrl = URL.WORKFLOW_URL;\n    }\n\n    static setApiToken(token) {\n        this.apiToken = token;\n    }\n  \n    static async apiLogin(email, password) {\n        try {\n            const { data } = await axios.post(\n                `${URL.WORKFLOW_URL}/login`, \n                { email, password }\n            );\n            const userInfo = { userID: data?.response?.user_id, token: data?.response?.token };\n            this.apiToken = userInfo.token;\n    \n            return userInfo;\n        } catch(err) {\n            console.log(`apiLogin fail ${email}`);\n\n        }\n    }\n\n    static printContents() {\n        console.log(this);\n    }\n\n    static async _fetchData(thingType, thingID) {\n        try {\n            const { data } = await axios.get(\n                `${this.dataUrl}/${thingType}/${thingID}`,\n                {},\n                { headers: { Authorization: `Bearer ${this.apiToken}` } },\n            );\n            return data.response;\n        } catch(err) {\n            console.log(`_fetchData fail ${thingType} ${thingID}`);\n        }\n    }    \n    \n    static async apiLogout() {\n        console.log(this.apiToken);\n        try {\n            const { data } = await axios.post(\n                `${this.workflowUrl}/logout`,\n                {},\n                { headers: { Authorization: `Bearer ${this.apiToken}` } },\n            );\n            return data.response;\n        } catch(err) {\n            console.log(`apiLogout fail`);\n        }\n    }\n\n    static async fetchUser(userID) {\n        const rawUser = await this._fetchData('user', userID);\n        return {\n            firstName: rawUser.first_text,\n            lastName: rawUser.last_text,\n            name: rawUser.first_last_text,\n            team: rawUser.teamnumt_text,\n        }\n    }\n  \n    async normalizeData(data) {\n      // Instance-specific normalization logic\n    }\n  \n    async fetchDataAndNormalize(endpoint) {\n      try {\n        const rawData = await this.fetchData(endpoint);\n        const normalizedData = await this.normalizeData(rawData);\n        return normalizedData;\n      } catch (error) {\n        throw error;\n      }\n    }\n  }\n  \n \n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}