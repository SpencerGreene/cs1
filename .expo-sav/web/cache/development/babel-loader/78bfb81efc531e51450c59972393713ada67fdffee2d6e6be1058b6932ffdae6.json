{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport axios from 'axios';\nimport * as URL from \"../config.js\";\nvar BubbleApi = function () {\n  function BubbleApi() {\n    _classCallCheck(this, BubbleApi);\n    this.apiToken = '';\n    this.dataUrl = URL.DATA_URL;\n    this.workflowUrl = URL.WORKFLOW_URL;\n  }\n  _createClass(BubbleApi, [{\n    key: \"apiLogin\",\n    value: function () {\n      var _apiLogin = _asyncToGenerator(function* (email, password) {\n        var _data$response, _data$response2;\n        var _yield$axios$post = yield axios.post(`${URL.WORKFLOW_URL}/login`, {\n            email: email,\n            password: password\n          }),\n          data = _yield$axios$post.data;\n        var userInfo = {\n          userID: data == null ? void 0 : (_data$response = data.response) == null ? void 0 : _data$response.user_id,\n          token: data == null ? void 0 : (_data$response2 = data.response) == null ? void 0 : _data$response2.token\n        };\n        this.apiToken = userInfo.token;\n        return userInfo;\n      });\n      function apiLogin(_x, _x2) {\n        return _apiLogin.apply(this, arguments);\n      }\n      return apiLogin;\n    }()\n  }, {\n    key: \"_fetchData\",\n    value: function () {\n      var _fetchData2 = _asyncToGenerator(function* (thingType, thingID) {\n        try {\n          var _yield$axios$get = yield axios.get(`${this.dataUrl}/${thingType}/${thingID}`),\n            data = _yield$axios$get.data;\n          return data.response;\n        } catch (err) {\n          console.log(`_fetchData fail ${thingType} ${thingID}`);\n        }\n      });\n      function _fetchData(_x3, _x4) {\n        return _fetchData2.apply(this, arguments);\n      }\n      return _fetchData;\n    }()\n  }, {\n    key: \"normalizeData\",\n    value: function () {\n      var _normalizeData = _asyncToGenerator(function* (data) {});\n      function normalizeData(_x5) {\n        return _normalizeData.apply(this, arguments);\n      }\n      return normalizeData;\n    }()\n  }, {\n    key: \"fetchDataAndNormalize\",\n    value: function () {\n      var _fetchDataAndNormalize = _asyncToGenerator(function* (endpoint) {\n        try {\n          var rawData = yield this.fetchData(endpoint);\n          var normalizedData = yield this.normalizeData(rawData);\n          return normalizedData;\n        } catch (error) {\n          throw error;\n        }\n      });\n      function fetchDataAndNormalize(_x6) {\n        return _fetchDataAndNormalize.apply(this, arguments);\n      }\n      return fetchDataAndNormalize;\n    }()\n  }]);\n  return BubbleApi;\n}();\nexport { BubbleApi as default };","map":{"version":3,"names":["axios","URL","BubbleApi","_classCallCheck","apiToken","dataUrl","DATA_URL","workflowUrl","WORKFLOW_URL","_createClass","key","value","_apiLogin","_asyncToGenerator","email","password","_data$response","_data$response2","_yield$axios$post","post","data","userInfo","userID","response","user_id","token","apiLogin","_x","_x2","apply","arguments","_fetchData2","thingType","thingID","_yield$axios$get","get","err","console","log","_fetchData","_x3","_x4","_normalizeData","normalizeData","_x5","_fetchDataAndNormalize","endpoint","rawData","fetchData","normalizedData","error","fetchDataAndNormalize","_x6","default"],"sources":["/Users/sgreene/src/cs1/api/BubbleApi.js"],"sourcesContent":["import axios from 'axios';\nimport * as URL from '../config.js';\n\nexport default class BubbleApi {\n    constructor() {\n      this.apiToken = '';\n      this.dataUrl = URL.DATA_URL;\n      this.workflowUrl = URL.WORKFLOW_URL;\n    }\n  \n    async apiLogin(email, password) {\n        const { data } = await axios.post(\n            `${URL.WORKFLOW_URL}/login`, \n            { email, password }\n        );\n        const userInfo = { userID: data?.response?.user_id, token: data?.response?.token };\n        this.apiToken = userInfo.token;\n\n        return userInfo;\n    }\n\n    async _fetchData(thingType, thingID) {\n        try {\n            const { data } = await axios.get(`${this.dataUrl}/${thingType}/${thingID}`);\n            return data.response;\n        } catch(err) {\n            console.log(`_fetchData fail ${thingType} ${thingID}`);\n        }\n    }\n  \n    async normalizeData(data) {\n      // Instance-specific normalization logic\n    }\n  \n    async fetchDataAndNormalize(endpoint) {\n      try {\n        const rawData = await this.fetchData(endpoint);\n        const normalizedData = await this.normalizeData(rawData);\n        return normalizedData;\n      } catch (error) {\n        throw error;\n      }\n    }\n  }\n  \n \n  "],"mappings":";;;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAO,KAAKC,GAAG;AAAqB,IAEfC,SAAS;EAC1B,SAAAA,UAAA,EAAc;IAAAC,eAAA,OAAAD,SAAA;IACZ,IAAI,CAACE,QAAQ,GAAG,EAAE;IAClB,IAAI,CAACC,OAAO,GAAGJ,GAAG,CAACK,QAAQ;IAC3B,IAAI,CAACC,WAAW,GAAGN,GAAG,CAACO,YAAY;EACrC;EAACC,YAAA,CAAAP,SAAA;IAAAQ,GAAA;IAAAC,KAAA;MAAA,IAAAC,SAAA,GAAAC,iBAAA,CAED,WAAeC,KAAK,EAAEC,QAAQ,EAAE;QAAA,IAAAC,cAAA,EAAAC,eAAA;QAC5B,IAAAC,iBAAA,SAAuBlB,KAAK,CAACmB,IAAI,CAC5B,GAAElB,GAAG,CAACO,YAAa,QAAO,EAC3B;YAAEM,KAAK,EAALA,KAAK;YAAEC,QAAQ,EAARA;UAAS,CACtB,CAAC;UAHOK,IAAI,GAAAF,iBAAA,CAAJE,IAAI;QAIZ,IAAMC,QAAQ,GAAG;UAAEC,MAAM,EAAEF,IAAI,qBAAAJ,cAAA,GAAJI,IAAI,CAAEG,QAAQ,qBAAdP,cAAA,CAAgBQ,OAAO;UAAEC,KAAK,EAAEL,IAAI,qBAAAH,eAAA,GAAJG,IAAI,CAAEG,QAAQ,qBAAdN,eAAA,CAAgBQ;QAAM,CAAC;QAClF,IAAI,CAACrB,QAAQ,GAAGiB,QAAQ,CAACI,KAAK;QAE9B,OAAOJ,QAAQ;MACnB,CAAC;MAAA,SAAAK,SAAAC,EAAA,EAAAC,GAAA;QAAA,OAAAhB,SAAA,CAAAiB,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAJ,QAAA;IAAA;EAAA;IAAAhB,GAAA;IAAAC,KAAA;MAAA,IAAAoB,WAAA,GAAAlB,iBAAA,CAED,WAAiBmB,SAAS,EAAEC,OAAO,EAAE;QACjC,IAAI;UACA,IAAAC,gBAAA,SAAuBlC,KAAK,CAACmC,GAAG,CAAE,GAAE,IAAI,CAAC9B,OAAQ,IAAG2B,SAAU,IAAGC,OAAQ,EAAC,CAAC;YAAnEb,IAAI,GAAAc,gBAAA,CAAJd,IAAI;UACZ,OAAOA,IAAI,CAACG,QAAQ;QACxB,CAAC,CAAC,OAAMa,GAAG,EAAE;UACTC,OAAO,CAACC,GAAG,CAAE,mBAAkBN,SAAU,IAAGC,OAAQ,EAAC,CAAC;QAC1D;MACJ,CAAC;MAAA,SAAAM,WAAAC,GAAA,EAAAC,GAAA;QAAA,OAAAV,WAAA,CAAAF,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAS,UAAA;IAAA;EAAA;IAAA7B,GAAA;IAAAC,KAAA;MAAA,IAAA+B,cAAA,GAAA7B,iBAAA,CAED,WAAoBO,IAAI,EAAE,CAE1B,CAAC;MAAA,SAAAuB,cAAAC,GAAA;QAAA,OAAAF,cAAA,CAAAb,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAa,aAAA;IAAA;EAAA;IAAAjC,GAAA;IAAAC,KAAA;MAAA,IAAAkC,sBAAA,GAAAhC,iBAAA,CAED,WAA4BiC,QAAQ,EAAE;QACpC,IAAI;UACF,IAAMC,OAAO,SAAS,IAAI,CAACC,SAAS,CAACF,QAAQ,CAAC;UAC9C,IAAMG,cAAc,SAAS,IAAI,CAACN,aAAa,CAACI,OAAO,CAAC;UACxD,OAAOE,cAAc;QACvB,CAAC,CAAC,OAAOC,KAAK,EAAE;UACd,MAAMA,KAAK;QACb;MACF,CAAC;MAAA,SAAAC,sBAAAC,GAAA;QAAA,OAAAP,sBAAA,CAAAhB,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAqB,qBAAA;IAAA;EAAA;EAAA,OAAAjD,SAAA;AAAA;AAAA,SAvCgBA,SAAS,IAAAmD,OAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}