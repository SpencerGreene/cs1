{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect, useRef, useImperativeHandle } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport AppColors from \"../styles/AppColors\";\nimport { CLOCKSTATES } from \"../config\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar CountdownTimer = React.forwardRef(function (_ref, ref) {\n  var initialTime = _ref.initialTime,\n    clockState = _ref.clockState,\n    startTimer = _ref.startTimer,\n    resetTimer = _ref.resetTimer;\n  var _useState = useState(initialTime),\n    _useState2 = _slicedToArray(_useState, 2),\n    time = _useState2[0],\n    setTime = _useState2[1];\n  var timerRef = useRef(null);\n  var isResetRef = useRef(false);\n  var handleStartTimer = function handleStartTimer() {\n    if (!timerRef.current) {\n      timerRef.current = setInterval(function () {\n        setTime(function (prevTime) {\n          if (prevTime > 0) {\n            return prevTime - 1;\n          } else {\n            clearInterval(timerRef.current);\n            return 0;\n          }\n        });\n      }, 1000);\n    }\n  };\n  var handleResetTimer = function handleResetTimer() {\n    console.log('resetTimer triggered');\n    clearInterval(timerRef.current);\n    setTime(initialTime);\n    isResetRef.current = true;\n    resetTimer && resetTimer();\n    isResetRef.current = false;\n  };\n  useEffect(function () {\n    return function () {\n      return clearInterval(timerRef.current);\n    };\n  }, []);\n  useEffect(function () {\n    console.log('set ref triggered');\n    ref.current = {\n      startTimer: handleStartTimer,\n      resetTimer: handleResetTimer\n    };\n  }, []);\n  useImperativeHandle(ref, function () {\n    return {\n      startTimer: handleStartTimer,\n      resetTimer: handleResetTimer\n    };\n  }, [handleStartTimer, handleResetTimer]);\n  var minutes = Math.floor(time / 60);\n  var seconds = time % 60;\n  return _jsx(View, {\n    children: clockState !== CLOCKSTATES.hidden && _jsx(Text, {\n      style: styles.clockLabel,\n      children: `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`\n    })\n  });\n});\nexport default CountdownTimer;\nvar styles = StyleSheet.create({\n  clockLabel: {\n    fontSize: 19,\n    color: AppColors.bodyText,\n    fontWeight: '500',\n    alignSelf: 'flex-end'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","useRef","useImperativeHandle","Text","View","StyleSheet","AppColors","CLOCKSTATES","jsx","_jsx","CountdownTimer","forwardRef","_ref","ref","initialTime","clockState","startTimer","resetTimer","_useState","_useState2","_slicedToArray","time","setTime","timerRef","isResetRef","handleStartTimer","current","setInterval","prevTime","clearInterval","handleResetTimer","console","log","minutes","Math","floor","seconds","children","hidden","style","styles","clockLabel","create","fontSize","color","bodyText","fontWeight","alignSelf"],"sources":["/Users/sgreene/src/cs1/components/CountdownTimer.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useImperativeHandle } from 'react';\nimport { Text, View, StyleSheet } from 'react-native';\nimport AppColors from '../styles/AppColors';\nimport { CLOCKSTATES } from '../config';\n\nconst CountdownTimer = React.forwardRef(({ initialTime, clockState, startTimer, resetTimer }, ref) => {\n    const [time, setTime] = useState(initialTime);\n    const timerRef = useRef(null);\n    const isResetRef = useRef(false);\n\n    const handleStartTimer = () => {\n        if (!timerRef.current) {\n            timerRef.current = setInterval(() => {\n                setTime((prevTime) => {\n                    if (prevTime > 0) {\n                        return prevTime - 1;\n                    } else {\n                        clearInterval(timerRef.current);\n                        // Handle timer expiration, e.g., show a message or trigger an action\n                        return 0;\n                    }\n                });\n            }, 1000);\n        }\n    };\n\n    const handleResetTimer = () => {\n        console.log('resetTimer triggered');\n        clearInterval(timerRef.current);\n        setTime(initialTime);\n        isResetRef.current = true;\n        resetTimer && resetTimer();\n        isResetRef.current = false;\n    };\n\n    useEffect(() => {\n        return () => clearInterval(timerRef.current);\n    }, []);\n\n    // useEffect(() => {\n    //     console.log('onStart triggered');\n\n    //     onStart && onStart(startTimer);\n    // }, [onStart]);\n\n    useEffect(() => {\n        console.log('set ref triggered');\n\n        ref.current = {\n            startTimer: handleStartTimer,\n            resetTimer: handleResetTimer,\n        };\n        // }, [ref, handleStartTimer, handleResetTimer]);\n    }, []);\n\n    useImperativeHandle(ref, () => ({\n        startTimer: handleStartTimer,\n        resetTimer: handleResetTimer,\n    }), [handleStartTimer, handleResetTimer]);\n\n    const minutes = Math.floor(time / 60);\n    const seconds = time % 60;\n\n    return (\n        <View>\n            {clockState !== CLOCKSTATES.hidden &&\n                <Text style={styles.clockLabel}>\n                    {`${minutes}:${seconds < 10 ? '0' : ''}${seconds}`}\n                </Text>\n            }\n        </View>\n    );\n});\n\nexport default CountdownTimer;\n\nconst styles = StyleSheet.create({\n    clockLabel: {\n        fontSize: 19,\n        color: AppColors.bodyText,\n        fontWeight: '500',\n        alignSelf: 'flex-end',\n    },\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}