{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport React, { useContext, useEffect } from 'react';\nimport Button from \"../components/Button\";\nimport BubbleApi from \"../api/BubbleApi\";\nimport Styles from \"../styles/Styles\";\nimport { AuthContext } from \"../components/AuthProvider\";\nimport BlueAllianceApi from \"../api/BlueAllianceApi\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function ScoutPage() {\n  var _this = this;\n  var _useContext = useContext(AuthContext),\n    userInfo = _useContext.userInfo,\n    logout = _useContext.logout,\n    appVariables = _useContext.appVariables,\n    setAppVariables = _useContext.setAppVariables;\n  var hasAppVariables = function () {\n    var _ref = _asyncToGenerator(function* () {\n      try {\n        var appVariablesJSON = yield AsyncStorage.getItem('appVariables');\n        if (appVariablesJSON && appVariablesJSON !== \"undefined\") {\n          var savedAppVariables = JSON.parse(appVariablesJSON);\n          if (savedAppVariables) {\n            setAppVariables(savedAppVariables);\n            console.log('found appVariables', savedAppVariables, 'in local cache');\n          }\n        } else {\n          console.log('no cached appVariables found');\n        }\n      } catch (err) {\n        console.log(`hasAppVariables error ${err}`);\n      }\n    });\n    return function hasAppVariables() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    var loadEvent = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        _this.hasAppVariables();\n        try {\n          if (!appVariables || !appVariables.fetchedDate) {\n            var _fetchedAppVariables = yield BubbleApi.getAppVariables();\n            console.log('fetched', _fetchedAppVariables, 'to store to local');\n            setAppVariables(_fetchedAppVariables);\n            yield AsyncStorage.setItem('appVariables', JSON.stringify(_fetchedAppVariables));\n          }\n          var colorDict = yield BubbleApi.getColorDict(userInfo.team);\n          var matches = yield BlueAllianceApi.fetchMatches(appVariables.eventKey);\n          console.log({\n            fetchedAppVariables: fetchedAppVariables,\n            colorDict: colorDict,\n            matches: matches\n          });\n        } catch (err) {\n          console.error(\"loadEvent failed\", err);\n        }\n      });\n      return function loadEvent() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    loadEvent();\n  }, []);\n  return _jsxs(View, {\n    style: Styles.column30,\n    children: [_jsx(Image, {\n      style: styles.image,\n      source: require(\"../assets/loginlogo.jpg\")\n    }), _jsx(View, {\n      id: \"textBlock\",\n      children: _jsxs(View, {\n        style: Styles.groupLeft,\n        children: [_jsxs(Text, {\n          style: [Styles.mediumTitle, styles.loginTitle],\n          children: [\"Welcome \", userInfo.name]\n        }), _jsx(Button, {\n          label: \"Log out\",\n          theme: \"primary\",\n          onPress: logout\n        })]\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  bottomNotes: {\n    marginTop: 60,\n    marginBottom: 100\n  },\n  loginTitle: {\n    marginTop: 30,\n    marginBottom: 12\n  },\n  image: {\n    width: 192,\n    height: 51.5,\n    alignSelf: 'center',\n    marginBottom: 30,\n    marginTop: 100\n  }\n});","map":{"version":3,"names":["AsyncStorage","React","useContext","useEffect","Button","BubbleApi","Styles","AuthContext","BlueAllianceApi","jsx","_jsx","jsxs","_jsxs","ScoutPage","_this","_useContext","userInfo","logout","appVariables","setAppVariables","hasAppVariables","_ref","_asyncToGenerator","appVariablesJSON","getItem","savedAppVariables","JSON","parse","console","log","err","apply","arguments","loadEvent","_ref2","fetchedDate","fetchedAppVariables","getAppVariables","setItem","stringify","colorDict","getColorDict","team","matches","fetchMatches","eventKey","error","View","style","column30","children","Image","styles","image","source","require","id","groupLeft","Text","mediumTitle","loginTitle","name","label","theme","onPress","StyleSheet","create","bottomNotes","marginTop","marginBottom","width","height","alignSelf"],"sources":["/Users/sgreene/src/cs1/pages/ScoutPage.js"],"sourcesContent":["import { StyleSheet, Text, View, TextInput, Image } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nimport React, { useContext, useEffect } from 'react';\nimport Button from '../components/Button';\nimport BubbleApi from '../api/BubbleApi';\n\nimport Styles from '../styles/Styles';\nimport { AuthContext } from '../components/AuthProvider';\nimport BlueAllianceApi from '../api/BlueAllianceApi';\n\nexport default function ScoutPage() {\n    const { userInfo, logout, appVariables, setAppVariables } = useContext(AuthContext);\n\n    const hasAppVariables = async () => {\n        try {\n            const appVariablesJSON = await AsyncStorage.getItem('appVariables');\n\n            if (appVariablesJSON && appVariablesJSON !== \"undefined\") {\n                const savedAppVariables = JSON.parse(appVariablesJSON);\n                if (savedAppVariables) {  // todo: check for current\n                    setAppVariables(savedAppVariables);\n                    console.log('found appVariables', savedAppVariables, 'in local cache');\n                }\n            } else {\n                console.log('no cached appVariables found')\n            }\n        } catch (err) {\n            console.log(`hasAppVariables error ${err}`);\n        }\n    };\n\n    useEffect(() => {\n        const loadEvent = async () => {\n            this.hasAppVariables();\n\n            try {\n                if (!appVariables || !appVariables.fetchedDate) {\n                    const fetchedAppVariables = await BubbleApi.getAppVariables();\n                    console.log('fetched', fetchedAppVariables, 'to store to local');\n\n                    setAppVariables(fetchedAppVariables);   // store in context\n                    await AsyncStorage.setItem('appVariables', JSON.stringify(fetchedAppVariables));\n                } \n                const colorDict = await BubbleApi.getColorDict(userInfo.team);\n                const matches = await BlueAllianceApi.fetchMatches(appVariables.eventKey);\n                console.log({ fetchedAppVariables, colorDict, matches });\n            } catch (err) {\n                console.error(\"loadEvent failed\", err);\n            }\n        }\n\n        loadEvent();\n    }, []);\n\n    return (\n        <View style={Styles.column30}>\n            <Image style={styles.image} source={require(\"../assets/loginlogo.jpg\")} />\n            <View id=\"textBlock\">\n                <View style={Styles.groupLeft}>\n                    <Text style={[Styles.mediumTitle, styles.loginTitle]}>Welcome {userInfo.name}</Text>\n                    <Button label=\"Log out\" theme=\"primary\" onPress={logout} />\n                </View>\n            </View>\n        </View>\n    );\n}\n\nconst styles = StyleSheet.create({\n    bottomNotes: {\n        marginTop: 60,\n        marginBottom: 100,\n    },\n    loginTitle: {\n        marginTop: 30,\n        marginBottom: 12,\n    },\n    image: {\n        width: 192,\n        height: 51.5,\n        alignSelf: 'center',\n        marginBottom: 30,\n        marginTop: 100,\n    },\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}