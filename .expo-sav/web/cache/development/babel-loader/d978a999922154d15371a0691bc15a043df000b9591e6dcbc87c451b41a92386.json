{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport axios from 'axios';\nimport * as URL from \"../config.js\";\nvar BubbleApi = function () {\n  function BubbleApi() {\n    _classCallCheck(this, BubbleApi);\n  }\n  _createClass(BubbleApi, [{\n    key: \"normalizeData\",\n    value: function () {\n      var _normalizeData = _asyncToGenerator(function* (data) {});\n      function normalizeData(_x) {\n        return _normalizeData.apply(this, arguments);\n      }\n      return normalizeData;\n    }()\n  }, {\n    key: \"fetchDataAndNormalize\",\n    value: function () {\n      var _fetchDataAndNormalize = _asyncToGenerator(function* (endpoint) {\n        try {\n          var rawData = yield this.fetchData(endpoint);\n          var normalizedData = yield this.normalizeData(rawData);\n          return normalizedData;\n        } catch (error) {\n          throw error;\n        }\n      });\n      function fetchDataAndNormalize(_x2) {\n        return _fetchDataAndNormalize.apply(this, arguments);\n      }\n      return fetchDataAndNormalize;\n    }()\n  }], [{\n    key: \"setApiToken\",\n    value: function setApiToken(token) {\n      this.apiToken = token;\n    }\n  }, {\n    key: \"apiLogin\",\n    value: function () {\n      var _apiLogin = _asyncToGenerator(function* (email, password) {\n        try {\n          var _data$response, _data$response2, _data$response3;\n          var _yield$axios$post = yield axios.post(`${URL.WORKFLOW_URL}/login`, {\n              email: email,\n              password: password\n            }),\n            data = _yield$axios$post.data;\n          var expireSeconds = data == null ? void 0 : (_data$response = data.response) == null ? void 0 : _data$response.expires;\n          console.log('expireSeconds', expireSeconds);\n          var nowDate = new Date();\n          console.log('nowDate ', nowDate.toLocaleString());\n          var userInfo = {\n            userID: data == null ? void 0 : (_data$response2 = data.response) == null ? void 0 : _data$response2.user_id,\n            token: data == null ? void 0 : (_data$response3 = data.response) == null ? void 0 : _data$response3.token,\n            expireTime: new Date().getTime() + expireSeconds * 1000\n          };\n          console.log('expires: ', Date(userInfo.expireTime).toLocaleString());\n          return userInfo;\n        } catch (err) {\n          console.log(`apiLogin fail ${email}`);\n        }\n      });\n      function apiLogin(_x3, _x4) {\n        return _apiLogin.apply(this, arguments);\n      }\n      return apiLogin;\n    }()\n  }, {\n    key: \"printContents\",\n    value: function printContents() {\n      console.log(this);\n    }\n  }, {\n    key: \"_fetchData\",\n    value: function () {\n      var _fetchData2 = _asyncToGenerator(function* (thingType, thingID) {\n        try {\n          var _yield$axios$get = yield axios.get(`${this.dataUrl}/${thingType}/${thingID}`, {}, {\n              headers: {\n                Authorization: `Bearer ${this.apiToken}`\n              }\n            }),\n            data = _yield$axios$get.data;\n          return data.response;\n        } catch (err) {\n          console.log(`_fetchData fail ${thingType} ${thingID}`);\n        }\n      });\n      function _fetchData(_x5, _x6) {\n        return _fetchData2.apply(this, arguments);\n      }\n      return _fetchData;\n    }()\n  }, {\n    key: \"apiLogout\",\n    value: function () {\n      var _apiLogout = _asyncToGenerator(function* () {\n        console.log(this.apiToken);\n        try {\n          var _yield$axios$post2 = yield axios.post(`${this.workflowUrl}/logout`, {}, {\n              headers: {\n                Authorization: `Bearer ${this.apiToken}`\n              }\n            }),\n            data = _yield$axios$post2.data;\n          return data.response;\n        } catch (err) {\n          console.log(`apiLogout fail`);\n        }\n      });\n      function apiLogout() {\n        return _apiLogout.apply(this, arguments);\n      }\n      return apiLogout;\n    }()\n  }, {\n    key: \"fetchUser\",\n    value: function () {\n      var _fetchUser = _asyncToGenerator(function* (userID) {\n        var rawUser = yield this._fetchData('user', userID);\n        console.log(rawUser);\n        return {\n          firstName: rawUser.first_text,\n          lastName: rawUser.last_text,\n          name: rawUser.first_last_text,\n          team: rawUser.teamnumt_text\n        };\n      });\n      function fetchUser(_x7) {\n        return _fetchUser.apply(this, arguments);\n      }\n      return fetchUser;\n    }()\n  }]);\n  return BubbleApi;\n}();\nBubbleApi.apiToken = '';\nBubbleApi.dataUrl = URL.DATA_URL;\nBubbleApi.workflowUrl = URL.WORKFLOW_URL;\nexport { BubbleApi as default };","map":{"version":3,"names":["axios","URL","BubbleApi","_classCallCheck","_createClass","key","value","_normalizeData","_asyncToGenerator","data","normalizeData","_x","apply","arguments","_fetchDataAndNormalize","endpoint","rawData","fetchData","normalizedData","error","fetchDataAndNormalize","_x2","setApiToken","token","apiToken","_apiLogin","email","password","_data$response","_data$response2","_data$response3","_yield$axios$post","post","WORKFLOW_URL","expireSeconds","response","expires","console","log","nowDate","Date","toLocaleString","userInfo","userID","user_id","expireTime","getTime","err","apiLogin","_x3","_x4","printContents","_fetchData2","thingType","thingID","_yield$axios$get","get","dataUrl","headers","Authorization","_fetchData","_x5","_x6","_apiLogout","_yield$axios$post2","workflowUrl","apiLogout","_fetchUser","rawUser","firstName","first_text","lastName","last_text","name","first_last_text","team","teamnumt_text","fetchUser","_x7","DATA_URL","default"],"sources":["/Users/sgreene/src/cs1/api/BubbleApi.js"],"sourcesContent":["import axios from 'axios';\nimport * as URL from '../config.js';\n\nexport default class BubbleApi {\n    static apiToken = '';\n    static dataUrl = URL.DATA_URL;\n    static workflowUrl = URL.WORKFLOW_URL;\n\n    static setApiToken(token) {\n        this.apiToken = token;\n    }\n  \n    static async apiLogin(email, password) {\n        try {\n            const { data } = await axios.post(\n                `${URL.WORKFLOW_URL}/login`, \n                { email, password }\n            );\n\n            const expireSeconds = data?.response?.expires;\n            console.log('expireSeconds', expireSeconds);\n            const nowDate = new Date();\n            console.log('nowDate ', nowDate.toLocaleString());\n            \n            const userInfo = { \n                userID: data?.response?.user_id, \n                token: data?.response?.token,\n                expireTime: new Date().getTime() + expireSeconds * 1000,\n            };\n\n            console.log('expires: ', Date(userInfo.expireTime).toLocaleString());\n    \n            return userInfo;\n        } catch(err) {\n            console.log(`apiLogin fail ${email}`);\n        }\n    }\n\n    static printContents() {\n        console.log(this);\n    }\n\n    static async _fetchData(thingType, thingID) {\n        try {\n            const { data } = await axios.get(\n                `${this.dataUrl}/${thingType}/${thingID}`,\n                {},\n                { headers: { Authorization: `Bearer ${this.apiToken}` } },\n            );\n            return data.response;\n        } catch(err) {\n            console.log(`_fetchData fail ${thingType} ${thingID}`);\n        }\n    }    \n    \n    static async apiLogout() {\n        console.log(this.apiToken);\n        try {\n            const { data } = await axios.post(\n                `${this.workflowUrl}/logout`,\n                {},\n                { headers: { Authorization: `Bearer ${this.apiToken}` } },\n            );\n            return data.response;\n        } catch(err) {\n            console.log(`apiLogout fail`);\n        }\n    }\n\n    static async fetchUser(userID) {\n        const rawUser = await this._fetchData('user', userID);\n        console.log(rawUser);\n        return {\n            firstName: rawUser.first_text,\n            lastName: rawUser.last_text,\n            name: rawUser.first_last_text,\n            team: rawUser.teamnumt_text,\n        }\n    }\n  \n    async normalizeData(data) {\n      // Instance-specific normalization logic\n    }\n  \n    async fetchDataAndNormalize(endpoint) {\n      try {\n        const rawData = await this.fetchData(endpoint);\n        const normalizedData = await this.normalizeData(rawData);\n        return normalizedData;\n      } catch (error) {\n        throw error;\n      }\n    }\n  }\n  \n \n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}